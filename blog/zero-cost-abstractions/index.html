<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com https://www.youtube.com;connect-src 'self';script-src 'self' 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://storopoli.com name=base><title>
Jose Storopoli, PhD • Zero-cost abstractions</title><link href=https://storopoli.com/favicon.svg rel=icon type=image/png><link title="Jose Storopoli, PhD - Atom Feed" href=https://storopoli.com/atom.xml rel=alternate type=application/atom+xml><link href="https://storopoli.com/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://storopoli.com/main.css?h=6b1dda977391dad0c76e" rel=stylesheet><link href="https://storopoli.com/extra.css?h=33c2dfb527f758787862" rel=stylesheet><link href="https://storopoli.com/skins/teal.css?h=bd19e558a52d678a50de" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="Personal website of Jose Storopoli, PhD" name=description><meta content="Personal website of Jose Storopoli, PhD" property=og:description><meta content="Zero-cost abstractions" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://storopoli.com/blog/zero-cost-abstractions/ property=og:url><meta content="Jose Storopoli, PhD" property=og:site_name><noscript><link href=https://storopoli.com/no_js.css rel=stylesheet></noscript><script src=https://storopoli.com/js/initializeTheme.min.js></script><script defer src=https://storopoli.com/js/themeSwitcher.min.js></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://storopoli.com>Jose Storopoli, PhD</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://storopoli.com/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://storopoli.com/tags/>tags </a><li class=menu-icons-container><ul class=menu-icons-group><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Zero-cost abstractions</h1><ul class=meta><span class="hidden p-author h-card"> <a title="Jose Storopoli, PhD" class=u-url href=https://storopoli.com rel=author>Jose Storopoli, PhD</a> </span><li>28th Nov 2023<li title="1830 words"><span aria-hidden=true class=separator>•</span>10 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a href=https://storopoli.com/tags/programming/>programming</a>, <li class=tag><a href=https://storopoli.com/tags/julia/>julia</a>, <li class=tag><a href=https://storopoli.com/tags/rust/>rust</a>, <li class=tag><a href=https://storopoli.com/tags/python/>python</a></ul><div class=toc-container><h3>Table of Contents</h3><ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#the-curious-case-of-the-python-boolean>The curious case of the Python boolean</a><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#more-zero-costs-abstractions>More zero-costs abstractions</a> <ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#for-loops>For-loops</a><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#enums>Enums</a></ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#conclusion>Conclusion</a></ul></div><section class=body><p>In programming language circles there’s a recently trend of discussing a concept called <strong>zero-cost abstractions</strong>: the ability to use higher-levels abstractions without suffering any loss of performance.<p>Zero-cost abstractions allows you to write performant code without having to give up a single drop of convenience and expressiveness:<p>You want for-loops? <em>You can have it</em>. Generics? <em>Yeah, why not</em>? Data structures? <em>Sure, keep’em coming</em>. Async operations? <em>You bet ya</em>! Multi-threading? <em>Hell yes</em>!<p>To put more formally, I like <a href=https://stackoverflow.com/a/69178445>this definition from StackOverflow</a>:<blockquote><p>Zero Cost Abstractions means adding higher-level programming concepts, like generics, collections and so on do not come with a run-time cost, only compile time cost (the code will be slower to compile). Any operation on zero-cost abstractions is as fast as you would write out matching functionality by hand using lower-level programming concepts like for loops, counters, ifs and using raw pointers.</blockquote><p>Here’s an analogy:<blockquote><p>Imagine that you are going to buy a car. The sales person offers you a fancy car praising how easy it is to drive it, that you don’t need to think about RPM, clutch and stick shift, parking maneuver, fuel type, and other shenanigans. You just turn it on and drive. However, once you take a look at the car’s data sheet, you are horrified. The car is bad in every aspect except easy of use. It has dreadful fuel consumption, atrocious safety ratings, disastrous handling, and so on…</blockquote><p>Believe me, you wouldn’t want to own that car.<p>Metaphors aside, that’s <strong>exactly what professional developers and whole teams choose to use every day: unacceptable inferior tools</strong>. Tools that, not only don’t have <strong>zero-cost abstractions</strong>, rather don’t allow you to even have non-zero-cost anything!<p>Let’s do some Python bashing in the meantime. I know that’s easy to bash Python, but that’s not the point. If Python wasn’t used so widely in production, I would definitely leave it alone. Don’t get me wrong, Python is the second-best language for everything.<h2 id=the-curious-case-of-the-python-boolean>The curious case of the Python boolean</h2><p><img alt="Python WTF?" src=https://storopoli.com/blog/zero-cost-abstractions/non-zero-cost-abstraction.png><p>I wish this meme was a joke, but it isn’t. A boolean is one of the simplest data type taking only two possible values: true or false. Just grab your nearest Python REPL:<pre class="language-python z-code" data-lang=python><code class=language-python data-lang=python><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">sys</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">getsizeof</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">getsizeof</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-language z-python">True</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">28</span>
</span></code></pre><p>The function <a href=https://docs.python.org/3/library/sys.html#sys.getsizeof><code>sys.getsizeof</code></a> returns the size of an object in bytes. <strong>How the hell Python needs 28 bytes to represent something that needs at most 1 byte</strong>? Imagine incurring a 28x penalty in memory size requirements for every boolean that you use. Now multiply this by every operation that your code is going to run in production over time. Again: <strong>unacceptable</strong>.<p>That’s because all objects in Python, in the sense that everything that you can instantiate, i.e. everything that you can put on the left hand-side of the <code>=</code> assignment, is a <a href=https://docs.python.org/3/c-api/structures.html#c.PyObject><code>PyObject</code></a>:<blockquote><p>All Python objects ultimately share a small number of fields at the beginning of the object’s representation in memory. These are represented by the <code>PyObject</code> and <code>PyVarObject</code> types.</blockquote><p>Python is dynamically-typed, which means that you don’t have primitives like 8-, 16-, 32-bit (un)signed integers and so on. Everything is a huge mess allocated in the heap that must carry not only its value, but also information about its type.<p>Most important, everything that is fast in Python is <em>not Python-based</em>. Take a look at the image below, I grabbed some popular Python libraries from GitHub, namely <a href=https://github.com/numpy/numpy>NumPy</a> (linear algebra package) and <a href=https://github.com/pytorch/pytorch>PyToch</a> (deep learning package), and checked the language codebase percentage.<p><img alt="Python my ass" src=https://storopoli.com/blog/zero-cost-abstractions/python-my-ass.jpg><p>Surprise, they are <strong><em>not</em> Python libraries</strong>. They are <strong>C/C++ codebases</strong>. Even if Python is the main language used in these codebases, I still think that this is not the case due to the nature of the Python code: <strong>all docstrings are written in Python</strong>. If you have a very fast C function in your codebase that takes 50 lines of code, followed by a Python wrapper function that calls it using 10 lines of code, <em>but</em> with a docstring that is 50 lines of code; you have a “Python”-majority codebase.<p>In a sense the most efficient Python programmer is a C/C++ programmer…<p>Here’s <a href=https://julialang.org>Julia</a>, which is also dynamically-typed:<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia">julia<span class="z-keyword z-operator z-julia">></span> Base.summarysize<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">true</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia"><span class="z-constant z-numeric z-julia">1</span>
</span></code></pre><p>And to your surprise, Julia is coded in …. Julia! Check the image below for the language codebase percentage of <a href=https://github.com/JuliaLang/julia>Julia</a> and <a href=https://github.com/LuxDL/Lux.jl><code>Lux.jl</code></a> (deep learning package).<p><img alt="Julia: turtles all the way" src=https://storopoli.com/blog/zero-cost-abstractions/julia.jpg><p>Finally, here’s <a href=https://rust-lang.org>Rust</a>, which is not dynamically-, but static-typed:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> main.rs
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span>mem<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Size of bool: <span class="z-constant z-other z-placeholder z-rust">{}</span> byte<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">mem<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">size_of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>release</span></span>
</span><span class="z-source z-shell z-bash">   <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Compiling</span></span><span class="z-meta z-function-call z-arguments z-shell"> size_of_bool v0.1.0</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Finished</span></span><span class="z-meta z-function-call z-arguments z-shell"> release <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>optimized<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> target(s</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.00s</span>
</span><span class="z-source z-shell z-bash">     <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Running</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-command z-backticks z-shell"><span class="z-punctuation z-section z-group z-begin z-shell">`</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">target/release/size_of_bool</span></span><span class="z-punctuation z-section z-group z-end z-shell">`</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Size</span></span><span class="z-meta z-function-call z-arguments z-shell"> of bool: 1 byte</span>
</span></code></pre><h2 id=more-zero-costs-abstractions>More zero-costs abstractions</h2><p>Let’s cover two more zero-costs abstractions, both in Julia and in Rust: <strong>for-loops</strong> and <strong>enums</strong>.<h3 id=for-loops>For-loops</h3><p>A friend and a Julia-advocate once told me that Julia’s master plan is to secretly “make everyone aware about <em>compilers</em>”. The <a href=https://en.wikipedia.org/wiki/Compiler>compiler</a> is a program that translate source code from a high-level programming language to a low-level programming language (e.g. assembly language, object code, or machine code) to create an executable program.<p>Python uses <a href=https://github.com/python/cpython>CPython</a> as the compiler. If you search around on why CPython/Python is so slow and inefficient, you’ll find that the culprits are:<ol><li>Python is <strong>dynamic-typed language</strong>.<li>Python’s <strong>Global Interpreter Lock (GIL) restricts multi-threading capabilities</strong>.<li>Python is <strong>interpreted</strong>, which means that Python code is executed sequentially: line-by-line.<li>Python is <strong>garbage-collected</strong>: all memory its tracked, and allocated or deallocated which introduces overhead.</ol><p>I completely disagree with almost all the above reasons, except the GIL. <strong>Python is slow because of its design decisions</strong>, more specifically the way CPython works under the hood. It is not built for performance in mind. Actually, the main objective of Python was to be a “language that would be easy to read, write, and maintain”. I salute that: Python has remained true to its main objective.<p>Now let’s switch to Julia:<ol><li>Julia is <strong>dynamic-typed language</strong>.<li>Julia is <strong>interpreted</strong>, which means that Julia code is executed sequentially: line-by-line.<li>Julia is <strong>garbage-collected</strong>: all memory its tracked, and allocated or deallocated which introduces overhead.</ol><p>I’ve copy-pasted all Python’s arguments for inefficiency, except the GIL. And, contrary to Python, <a href=https://julialang.org/benchmarks/>Julia is fast</a>! Sometimes even faster than C. Actually, that was the goal all along since Julia’s inception. If you check the <a href=https://julialang.org/blog/2012/02/why-we-created-julia/>notorious Julia announcement blog post from 2012</a>:<blockquote><p>We want a language that’s open source, with a liberal license. We want the speed of C with the dynamism of Ruby. We want a language that’s homoiconic, with true macros like Lisp, but with obvious, familiar mathematical notation like Matlab. We want something as usable for general programming as Python, as easy for statistics as R, as natural for string processing as Perl, as powerful for linear algebra as Matlab, as good at gluing programs together as the shell. Something that is dirt simple to learn, yet keeps the most serious hackers happy. We want it interactive and we want it compiled.<p>(Did we mention it should be as fast as C?)</blockquote><p>It mentions “speed” twice. Not only that, but also specifically says that it should match C’s speed.<p>Julia is fast because of its design decisions. One of the major reasons why Julia is fast is because of the choice of compiler that it uses: <a href=https://llvm.org/>LLVM</a>.<p>LLVM originally stood for <strong>l</strong>ow <strong>l</strong>evel <strong>v</strong>irtual <strong>m</strong>achine. Despite its name, LLVM has little to do with traditional virtual machines. LLVM can take <a href=https://en.wikipedia.org/wiki/Intermediate_representation>intermediate representation (IR)</a> code and compile it into machine-dependent instructions. It has <a href=https://foundation.llvm.org/sponsors>support and sponsorship</a> from a lot of big-tech corporations, such as Apple, Google, IBM, Meta, Arm, Intel, AMD, Nvidia, and so on. It is a pretty fast compiler that can do wonders in optimizing IR code to a plethora of computer architectures.<p>In a sense, Julia is a front-end for LLVM. It turns your easy-to-read and easy-to-write Julia code into LLVM IR code. Take this for-loop example inside a function:<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia"><span class="z-meta z-function z-julia"><span class="z-keyword z-declaration z-function z-julia">function</span> <span class="z-entity z-name z-function z-julia"><span class="z-meta z-generic-name z-julia">sum_10</span></span><span class="z-punctuation z-section z-parameters z-end z-julia">(</span><span class="z-meta z-function z-parameters z-julia"><span class="z-punctuation z-section z-parameters z-end z-julia">)</span></span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">    acc <span class="z-keyword z-operator z-assignment z-julia">=</span> <span class="z-constant z-numeric z-julia">0</span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">    <span class="z-keyword z-control z-julia">for</span> i <span class="z-keyword z-control z-julia">in</span> <span class="z-constant z-numeric z-julia">1</span><span class="z-keyword z-operator z-colon z-julia">:</span><span class="z-constant z-numeric z-julia">10</span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        acc <span class="z-keyword z-operator z-julia">+=</span> i
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">    <span class="z-keyword z-other z-julia">end</span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">    <span class="z-keyword z-other z-julia">return</span> acc
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia"><span class="z-keyword z-other z-julia">end</span></span>
</span></code></pre><p>Let’s check what Julia generates as LLVM IR code for this function. We can do that with the <code>@code_llvm</code> macro.<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia">julia<span class="z-keyword z-operator z-julia">></span> <span class="z-meta z-function-call z-macro z-julia"><span class="z-punctuation z-definition z-macro z-julia">@</span><span class="z-variable z-macro z-julia"><span class="z-meta z-generic-name z-julia">code_llvm</span></span></span> debuginfo<span class="z-keyword z-operator z-assignment z-julia">=</span><span class="z-keyword z-operator z-colon z-julia"><span class="z-constant z-other z-symbol z-julia">:</span></span><span class="z-constant z-other z-symbol z-julia">none</span> sum_<span class="z-constant z-numeric z-julia">10</span><span class="z-meta z-function-call z-julia"><span class="z-punctuation z-section z-arguments z-begin z-julia">(</span></span><span class="z-meta z-function-call z-julia"><span class="z-meta z-function-call z-arguments z-julia"><span class="z-punctuation z-section z-arguments z-end z-julia">)</span></span></span>
</span><span class="z-source z-julia">define i<span class="z-constant z-numeric z-julia">64</span> <span class="z-meta z-function-call z-macro z-julia"><span class="z-punctuation z-definition z-macro z-julia">@</span><span class="z-variable z-macro z-julia"><span class="z-meta z-generic-name z-julia">julia_sum_10_172</span></span></span><span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span> <span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span>0 {</span>
</span><span class="z-source z-julia">top<span class="z-keyword z-operator z-julia">:</span>
</span><span class="z-source z-julia">  ret i<span class="z-constant z-numeric z-julia">64</span> <span class="z-constant z-numeric z-julia">55</span>
</span><span class="z-source z-julia">}
</span></code></pre><p>You can’t easily fool the compiler. Julia understands that the answer is 55, and the LLVM IR generated code is pretty much just “return 55 as a 64-bit integer”.<p>Let’s also check the machine-dependent instructions with the <code>@code_native</code> macro. I am using an Apple Silicon machine, so these instructions might differ from yours:<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia">julia<span class="z-keyword z-operator z-julia">></span> <span class="z-meta z-function-call z-macro z-julia"><span class="z-punctuation z-definition z-macro z-julia">@</span><span class="z-variable z-macro z-julia"><span class="z-meta z-generic-name z-julia">code_native</span></span></span> debuginfo<span class="z-keyword z-operator z-assignment z-julia">=</span><span class="z-keyword z-operator z-colon z-julia"><span class="z-constant z-other z-symbol z-julia">:</span></span><span class="z-constant z-other z-symbol z-julia">none</span> sum_<span class="z-constant z-numeric z-julia">10</span><span class="z-meta z-function-call z-julia"><span class="z-punctuation z-section z-arguments z-begin z-julia">(</span></span><span class="z-meta z-function-call z-julia"><span class="z-meta z-function-call z-arguments z-julia"><span class="z-punctuation z-section z-arguments z-end z-julia">)</span></span></span>
</span><span class="z-source z-julia">        .section        __TEXT,__text,regular,pure_instructions
</span><span class="z-source z-julia">        .build_version macos, <span class="z-constant z-numeric z-julia">14</span>, <span class="z-constant z-numeric z-julia">0</span>
</span><span class="z-source z-julia">        .globl  _julia_sum_<span class="z-constant z-numeric z-julia">10_214</span>               ; <span class="z-keyword z-operator z-julia">-</span><span class="z-keyword z-operator z-julia">-</span> Begin <span class="z-meta z-function z-julia"><span class="z-keyword z-declaration z-function z-julia">function</span> <span class="z-entity z-name z-function z-julia"><span class="z-meta z-generic-name z-julia">julia_sum_10_214</span></span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        .p<span class="z-constant z-numeric z-julia">2</span>align        <span class="z-constant z-numeric z-julia">2</span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">_julia_sum_<span class="z-constant z-numeric z-julia">10_214</span><span class="z-keyword z-operator z-colon z-julia">:</span>                      ; <span class="z-meta z-function-call z-macro z-julia"><span class="z-punctuation z-definition z-macro z-julia">@</span><span class="z-variable z-macro z-julia"><span class="z-meta z-generic-name z-julia">julia_sum_10_214</span></span></span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        .cfi_startproc
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">; <span class="z-keyword z-operator z-julia">%</span>bb<span class="z-constant z-numeric z-julia">.0</span><span class="z-keyword z-operator z-colon z-julia">:</span>                                ; <span class="z-keyword z-operator z-julia">%</span>top
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        mov     w<span class="z-constant z-numeric z-julia">0</span>, <span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span>55</span>
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        ret
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">        .cfi_endproc
</span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia">                                        ; <span class="z-keyword z-operator z-julia">-</span><span class="z-keyword z-operator z-julia">-</span> End <span class="z-meta z-function z-julia"><span class="z-keyword z-declaration z-function z-julia">function</span>
</span></span></span><span class="z-source z-julia"><span class="z-meta z-function z-julia"><span class="z-meta z-function z-julia">.subsections_via_symbols
</span></span></span></code></pre><p>The only important instruction for our argument here is the <code>mov w0, #55</code>. This means “move the value 55 into the <code>w0</code> register”, where <code>w0</code> is one of registers available in ARM-based architectures (which Apple Silicon chips are).<p>This is a <strong>zero-cost abstraction</strong>! I don’t need to give up for-loops, because they might be slow and inefficient; like some Python users suggest newcomers. I can have the full convenience and expressiveness of for-loops without paying performance costs. Pretty much the definition of a zero-cost abstraction from above.<p>Using LLVM as a compiler backend is not something unique to Julia. Rust also uses LLVM under the hood. Take for example this simple Rust code:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> main.rs
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">sum_10</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">i32</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> acc <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> i <span class="z-keyword z-operator z-rust">in</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-keyword z-operator z-assignment z-rust">=</span><span class="z-constant z-numeric z-integer z-decimal z-rust">10</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        acc <span class="z-keyword z-operator z-assignment z-rust">+=</span> i
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    acc
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>sum_10: <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-function z-rust">sum_10</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>We can inspect both LLVM IR code and machine instructions with the <a href=https://github.com/pacak/cargo-show-asm><code>cargo-show-asm</code></a> crate:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo asm<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>llvm</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>sum_10::main<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> 55</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Finished</span></span><span class="z-meta z-function-call z-arguments z-shell"> release <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>optimized<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> target(s</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.00s</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">store</span></span><span class="z-meta z-function-call z-arguments z-shell"> i32 55, ptr <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span><span class="z-variable z-other z-readwrite z-shell">_9</span></span>, align 4</span>
</span></code></pre><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo asm <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>sum_10::main<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> 55</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Finished</span></span><span class="z-meta z-function-call z-arguments z-shell"> release <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>optimized<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> target(s</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.00s</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mov</span></span><span class="z-meta z-function-call z-arguments z-shell"> w8, <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">55</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></code></pre><p>No coincidence that the LLVM IR code is very similar, with the difference that integers, by default, in Julia are 64 bits and in Rust 32 bits. However, the machine code is <strong>identical</strong>: “move the value 55 into a <code>w</code> something register”.<h3 id=enums>Enums</h3><p>Another zero-cost abstraction, in Julia and Rust, is <strong>enums</strong>.<p>In Julia all enums, by default have a <code>BaseType</code> of <code>Int32</code>: a signed 32-bit integer. However, we can override this with type annotations:<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia">julia<span class="z-keyword z-operator z-julia">></span> <span class="z-meta z-function-call z-macro z-julia"><span class="z-punctuation z-definition z-macro z-julia">@</span><span class="z-variable z-macro z-julia"><span class="z-support z-function z-macro z-julia">enum</span></span></span> Thing<span class="z-keyword z-operator z-colons z-julia">::</span>Bool One Two
</span><span class="z-source z-julia">
</span><span class="z-source z-julia">julia<span class="z-keyword z-operator z-julia">></span> Base.summarysize<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>Thing<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">false</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia"><span class="z-constant z-numeric z-julia">1</span>
</span></code></pre><p>Here we have an enum <code>Thing</code> with two variants: <code>One</code> and <code>Two</code>. Since we can safely represent all the possible variant space of <code>Thing</code> with a boolean type, we override the <code>BaseType</code> of <code>Thing</code> to be the <code>Bool</code> type. Unsurprised, any object of <code>Thing</code> occupies 1 byte in memory.<p>We can achieve the same with Rust:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> main.rs
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span>mem<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">allow</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">dead_code</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">Thing</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    One<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Two<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Size of Thing: <span class="z-constant z-other z-placeholder z-rust">{}</span> byte<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">mem<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">size_of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Thing<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>release</span></span>
</span><span class="z-source z-shell z-bash">   <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Compiling</span></span><span class="z-meta z-function-call z-arguments z-shell"> enum_size v0.1.0</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Finished</span></span><span class="z-meta z-function-call z-arguments z-shell"> release <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>optimized<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> target(s</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.09s</span>
</span><span class="z-source z-shell z-bash">     <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Running</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-command z-backticks z-shell"><span class="z-punctuation z-section z-group z-begin z-shell">`</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">target/release/enum_size</span></span><span class="z-punctuation z-section z-group z-end z-shell">`</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Size</span></span><span class="z-meta z-function-call z-arguments z-shell"> of Thing: 1 byte</span>
</span></code></pre><p>However, contrary to Julia, Rust compiler automatically detects the enum’s variant space size and adjust accordingly. So, no need of overrides.<h2 id=conclusion>Conclusion</h2><p>Zero-cost abstractions are a joy to have in a programming language. It enables you, as a programmer, to just focus on what’s important: write expressive code that is easy to read, maintain, debug, and build upon.<p>It is no wonder that zero-cost abstractions is a pervasive feature of two of my top-favorite languages: <a href=https://julialang.org>Julia</a> and <a href=https://rust-lang.org>Rust</a>.</section></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=overlay for=toc-toggle></label><label title="Toggle Table of Contents" class=button for=toc-toggle id=toc-button><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#the-curious-case-of-the-python-boolean>The curious case of the Python boolean</a><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#more-zero-costs-abstractions>More zero-costs abstractions</a> <ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#for-loops>For-loops</a><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#enums>Enums</a></ul><li><a href=https://storopoli.com/blog/zero-cost-abstractions/#conclusion>Conclusion</a></ul></div></div></div><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://storopoli.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://storopoli.com/atom.xml> <img alt=feed loading=lazy src=https://storopoli.com/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=mailto:jose@storopoli.com> <img alt=email loading=lazy src=https://storopoli.com/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://storopoli.com/publickey.txt> <img alt=pgp loading=lazy src=https://storopoli.com/social_icons/key.svg title=pgp> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/storopoli/> <img alt=github loading=lazy src=https://storopoli.com/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://matrix.to/#/@jose:storopoli.com> <img alt=matrix loading=lazy src=https://storopoli.com/social_icons/matrix.svg title=matrix> </a><li><a class="nav-links no-hover-padding social" href="https://simplex.chat/contact#/?v=2-5&smp=smp%3A%2F%2FUkMFNAXLXeAAe0beCa4w6X_zp18PwxSaSjY17BKUGXQ%3D%40smp12.simplex.im%2FUXrwU_eqdgeHQ6HYehFs0s8VRHOr3k47%23%2F%3Fv%3D1-2%26dh%3DMCowBQYDK2VuAyEApVAYxmE0bpIIiPftNjehy4qOoa14ubyEGzbRX_BlO0w%253D%26srv%3Die42b5weq7zdkghocs3mgxdjeuycheeqqmksntj57rmejagmg4eor5yd.onion" rel=" me"> <img alt=simplex loading=lazy src=https://storopoli.com/social_icons/simplex.svg title=simplex> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://orcid.org/0000-0002-0559-5176> <img alt=orcid loading=lazy src=https://storopoli.com/social_icons/orcid.svg title=orcid> </a></ul></nav><nav class=nav-navs></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> • <a href=https://github.com/storopoli/storopoli.com> Site source </a></small></div></section></footer>