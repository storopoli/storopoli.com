<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com https://www.youtube.com;connect-src 'self';script-src 'self' 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://storopoli.com name=base><title>
Jose Storopoli, PhD • Sherlock Holmes final letter: a simple dead man's switch in Rust</title><link href=https://storopoli.com/favicon.svg rel=icon type=image/png><link title="Jose Storopoli, PhD - Atom Feed" href=https://storopoli.com/atom.xml rel=alternate type=application/atom+xml><link href="https://storopoli.com/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://storopoli.com/main.css?h=6b1dda977391dad0c76e" rel=stylesheet><link href="https://storopoli.com/extra.css?h=33c2dfb527f758787862" rel=stylesheet><link href="https://storopoli.com/skins/teal.css?h=bd19e558a52d678a50de" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="Personal website of Jose Storopoli, PhD" name=description><meta content="Personal website of Jose Storopoli, PhD" property=og:description><meta content="Sherlock Holmes final letter: a simple dead man's switch in Rust" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://storopoli.com/blog/dead-man-switch/ property=og:url><meta content="Jose Storopoli, PhD" property=og:site_name><noscript><link href=https://storopoli.com/no_js.css rel=stylesheet></noscript><script src=https://storopoli.com/js/initializeTheme.min.js></script><script defer src=https://storopoli.com/js/themeSwitcher.min.js></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://storopoli.com>Jose Storopoli, PhD</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://storopoli.com/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://storopoli.com/tags/>tags </a><li class=menu-icons-container><ul class=menu-icons-group><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Sherlock Holmes final letter: a simple dead man’s switch in Rust</h1><ul class=meta><span class="hidden p-author h-card"> <a title="Jose Storopoli, PhD" class=u-url href=https://storopoli.com rel=author>Jose Storopoli, PhD</a> </span><li>23rd Mar 2024<li title="1664 words"><span aria-hidden=true class=separator>•</span>9 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a href=https://storopoli.com/tags/rust/>rust</a>, <li class=tag><a href=https://storopoli.com/tags/nix/>nix</a>, <li class=tag><a href=https://storopoli.com/tags/privacy/>privacy</a></ul><div class=toc-container><h3>Table of Contents</h3><ul><li><a href=https://storopoli.com/blog/dead-man-switch/#dead-man-s-switch>Dead Man’s Switch</a><li><a href=https://storopoli.com/blog/dead-man-switch/#how-to-use-it>How to Use It</a><li><a href=https://storopoli.com/blog/dead-man-switch/#the-implementation-details>The Implementation Details</a><li><a href=https://storopoli.com/blog/dead-man-switch/#contributions-are-welcome>Contributions are Welcome</a><li><a href=https://storopoli.com/blog/dead-man-switch/#conclusion>Conclusion</a></ul></div><section class=body><p><img alt="Sherlock Holmes fights Moriarty at the Reichenbach Falls" src=https://storopoli.com/blog/dead-man-switch/the_final_problem.png><p>Got state secrets? Or maybe 50 BTC? Don’t trust your government or lawyers? And you want to make sure that if you die, your secrets are passed on? Don’t worry, I got you covered. In this post, I’ll introduce you to a <strong>simple no-bullshit dead man’s switch</strong> written in Rust.<h2 id=dead-man-s-switch>Dead Man’s Switch</h2><p>According to <a href=https://en.wikipedia.org/wiki/Dead_man%27s_switch>Wikipedia</a>:<blockquote><p>A <strong>dead man’s switch</strong> is a switch that is designed to be <strong>activated or deactivated if the human operator becomes incapacitated</strong>, such as through death, loss of consciousness, or being bodily removed from control. Originally applied to switches on a vehicle or machine, it has since come to be used to describe other intangible uses, as in <strong>computer software</strong>.</blockquote><p>A Dead Man’s Switch (DMS) can be handy and common scenarios might be:<ul><li><strong>Password to your encrypted files</strong>: You gave a trusted person an encrypted USB drive and the DMS sends the password to decrypt it.<li><strong>Bitcoin Multisig</strong>: Sending 1 of 3 keys to a trusted person. You hold 1 key, your friend holds another key, and the DMS holds the last key.<li><strong>Instructions</strong>: Sending instructions on how to access something of value or importance.<li><strong>Goodbye Note</strong>: Sending a goodbye note to loved ones.</ul><p>A DMS is specially useful when you don’t trust the government or lawyers to handle your affairs after you die. It’s also useful when you don’t want to disclose your secrets while you are alive.<p>The idea is simple:<ol><li><strong>You set up a DMS</strong>.<li><strong>You need to check in periodically</strong>.<li><strong>If you don’t check in, the DMS is triggered</strong>.</ol><p>In this post opening picture, is depicted an image from Conan Doyle’s story <a href=https://en.wikipedia.org/wiki/The_Final_Problem>The Final Problem</a>, where Sherlock Holmes fights Moriarty at the Reichenbach Falls. Eventually, both fall to their deaths. I am pretty confident that Sherlock Holmes had a DMS in place to send Watson a message.<p>I’ve tried finding nice implementations of DMS, but to no avail. They all were either unmaintained or plaged with spaghetti code. My inspiration to build one came from two sources. First, a friend of mine told me that he is using a bunch of badly-written shell scripts with some cron jobs to manage his DMS. Second, there might be a genuine need for a simple DMS in the privacy community. For example, <a href=https://finalmessage.io>finalmessage.io</a>, despite being closed source, and you have no idea who’s behind it, has gathered enough users in a subscription model and they are not accepting new users anymore. If people are paying for this, they can pay for a Linux server somewhere. But they would need a simple DMS to run on it.<h2 id=how-to-use-it>How to Use It</h2><div class="admonition danger"><div class="admonition-icon admonition-icon-danger"></div><div class=admonition-content><strong class=admonition-title>Disclaimer</strong><p>Use at your own risk. Check the f****(as in <em>friendly</em>) code.</div></div><p>I invite you to check out the code on GitHub at <a href=https://github.com/storopoli/dead-man-switch><code>storopoli/dead-man-switch</code></a>. The license is <a href=https://www.gnu.org/licenses/agpl-3.0.html>AGPL-3.0</a>, which means you can use it for free as long as you share your code. The package is also available on <a href=https://crates.io/crates/dead-man-switch>crates.io</a>, Rust’s package manager.<p>DMS is very easy to use and deploy. There are several alternatives on how to deploy it. Here are the two easiest ways:<ol><li><p><strong>Building from Source</strong>:</p> <ol><li><p>In a fresh Debian/Ubuntu server install the following dependencies:</p> <pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> apt-get install<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>y</span> cargo pkg-config libssl-dev</span>
</span></code></pre><li><p>Install the DMS:</p> <pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> install dead-man-switch-tui</span>
</span></code></pre><li><p>Run the app with:</p> <pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dead-man-switch-tui</span></span>
</span></code></pre></ol><li><p><strong>Using Nix</strong>. This is the easiest just do <code>nix run github:storopoli/dead-man-switch</code>.</p></ol><blockquote><p><a href="https://storopoli.com/blog/dead-man-switch/$block.attrs('info')"></a> I’ve also released a Web Interface for the dead-man-switch. You can easily deploy it using Docker or Docker Compose. Check out the <a href=https://github.com/storopoli/dead-man-switch>GitHub repository</a>.<p>I’ve also launched a <a href=https://start9.com>StartOS</a> app with a simple interface for configuring and checking in with the Dead Man’s Switch. Check out the instructions on the <a href=https://github.com/storopoli/dead-man-switch-startos><code>dead-man-switch-startos</code> repository</a>.</blockquote><p>Once, you successfully run the app, you will see the following output:<p><img alt="Initial Screen of Dead Man’s Switch" src=https://storopoli.com/blog/dead-man-switch/app_first_run.png><p>If you read the instructions carefully, all you need to know is detailed in these 3 steps:<ol><li>Edit the Config at <code>/root/.config/deadman/config.toml</code> and modify the settings.<li>Check-In with <code>c</code> within the warning time.<li>Otherwise the Dead Man’s Switch will be triggered and the message with optional attachment will be sent.</ol><p>Upon the first run, the app will create a configuration file at an OS-agnostic config file location:<ul><li>Linux: <code>$XDG_CONFIG_HOME</code>, i.e. <code>$HOME/.config|/home/alice/.config</code><li>macOS: <code>$HOME/Library/Application Support</code>, i.e. <code>/Users/Alice/Library/Application Support</code><li>Windows: <code>{FOLDERID_RoamingAppData}</code>, i.e. <code>C:\Users\Alice\AppData\Roaming</code></ul><p>In this example, I am running it from a Debian server as the <code>root</code> user. Hence, the configuration file is at <code>/root/.config/deadman/config.toml</code>.<p>If you open the configuration file, you will see the following content. I’ve added some default values for inspiration[^central-park]:<blockquote><p><a href="https://storopoli.com/blog/dead-man-switch/$block.attrs('info')"></a> Please don’t go to bench 137 in Central Park, NY. That was just an example.</blockquote><pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">username</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>me@example.com<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">password</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span><span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">smtp_server</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>smtp.example.com<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">smtp_port</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">587</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">message</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>I'm probably dead, go to Central Park NY under bench #137 you'll find an age-encrypted drive. Password is our favorite music in Pascal case.<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">message_warning</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>Hey, you haven't checked in for a while. Are you okay?<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">subject</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>[URGENT] Something Happened to Me!<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">subject_warning</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>[URGENT] You need to check in!<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">to</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>someone@example.com<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">from</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>me@example.com<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">timer_warning</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">1209600</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">timer_dead_man</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">604800</span>
</span></code></pre><p>The configs are self-explanatory. You might need some help to set up and find a reliable SMTP server. One option is to use Gmail. Unfortunately, Proton or Tutanota are not supported because they don’t support SMTP. Just grab the support page of your email provider and search for SMTP settings. Plug the values in and you are good to go.<p>I want to bring your attention to the <strong><code>timer_warning</code></strong> and <strong><code>timer_dead_man</code></strong> configs. These are very important.<p>The way DMS works is by <strong>checking in periodically</strong>. If you <strong><em>don’t</em> check in within the <code>timer_warning</code> time, the DMS will send a warning message to your own email</strong>, i.e. the <code>from</code> email declared in the config, with the message <code>message_warning</code> and subject <code>subject_warning</code>.<p>If you <strong><em>still don’t check in</em> within the <code>timer_dead_man</code> time, the DMS will send the “Dead Man’s” message to the <code>to</code> email declared in the config</strong>, with the message <code>message</code> and subject <code>subject</code>.<p>The timers are in <strong>seconds</strong>, and the <strong>default values</strong> are:<ul><li><strong>Warning Timer</strong>: 2 weeks<li><strong>Dead Man’s Timer</strong>: 1 week</ul><p>Feel free to change these values to your liking.<p>You can also add an attachment to the Dead Man’s Message. Just add an <code>attachment</code> field to the config file with the <em>absolute</em> path to the file. For example:<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">attachment</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>/root/important_file.txt<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span></code></pre><p>A good idea is to make this file encrypted. Actually, it’s even better if you encrypted the whole fucking thing. You can use <a href=https://gnupg.org/>PGP</a> or <a href=https://age-encryption.org><code>age</code></a>. For example, this is a PGP-encrypted message:<pre class=z-code><code><span class="z-text z-plain">-----BEGIN PGP MESSAGE-----
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">jA0ECQMKDpTufzWBF+//0ukBT/vslTBHGlMeri/cqpkxO2X7ZY1SYwiYwDqvdFAV
</span><span class="z-text z-plain">FGzPHUaGh8tQiuoh7tj0HJEIqBaktJoDNe3XsszFVSp3eQAAiWUh+t/5pTIcQhW9
</span><span class="z-text z-plain">iKJHPUKGhqf9vg0Q4LS0F1RMhLejoeXt/TvtHfsHE+kymbvp8p5gNiwoyugEZlta
</span><span class="z-text z-plain">qLd0ZJvMDg5c0/Qw81+e6jW0ApwcT7MVf/Y0dFKW1epsA1QfGH5rQYUWPJDP+SZR
</span><span class="z-text z-plain">hBd5034eKNKTUZYwAAoR0UJ6eqcnev9z9sTuct3uGPeXnNqK0zDKaP3rV/9hnVPN
</span><span class="z-text z-plain">3gwEQEWL2Dl39pjv+x+QdViCirlrjPa0BaHzwveid2N8Ik3QBsxKGkyAXd0w3G+g
</span><span class="z-text z-plain">VAGwKDLUkXUIDytk/PI8vRGLUhSmyG29KdeGdEiKde+DG5MUtjC4UyFCWxa5ZX5y
</span><span class="z-text z-plain">WNEg7049bd5Nx3B5WlFmKyWbsHynoziDJU2aq2uvaBLYA48roDN/0sEUsuGFpxm3
</span><span class="z-text z-plain">0/3vd0kGxMt20HlsVpDRQz75mWJEmzxY2itRJbR84bEyN0ItWE9G5WwQ4mjmU+XL
</span><span class="z-text z-plain">0xYazglNYoAG0FXCxD6EpbDbQZxO/OKIaGWI4d2Zs1zcwbcEfZnhsKB5kI4tYJZ2
</span><span class="z-text z-plain">ZTq+Q4xY4sFEoYzmNQbHY+mpgskgmHbRdBAGea+raiAXK/wL4Qc9x1bDdNIKNBup
</span><span class="z-text z-plain">lsCRA1Dj/5s0Qy64d2cbfWvCvx3R9B0JsHTcFq4DBELSOzSyzC/mpCXCAi9K/jE5
</span><span class="z-text z-plain">5VAnsnqaTZm+DVpciMTRxuRPD50MDYogTA/N+Jer9WmQOgc0e1VrWsho2CgX0Z8I
</span><span class="z-text z-plain">ycF56Wm+lBjTGRMLXexA1Ietm88wg/OrY6BE57xpBMVemRc0P0A2g0KC1WkX8J3I
</span><span class="z-text z-plain">fw5IKoiGsd9mvuHNxJ40Rm14iTYV0z9t97GFTmWji5BZtKoQ8vNmy8skgEgEUuHS
</span><span class="z-text z-plain">LtwCU8D5XsHQY2EWsQv23KPyxpbdvl7vGP75xCzRqcWmeCMSyH1qYPsO87sPJ4eL
</span><span class="z-text z-plain">Z4ywlr9ULagMgNMK/KO7F45yJRCqGKCaYB3cpcEpgUIIlZRCiXZSUifb/0EMWNAb
</span><span class="z-text z-plain">DzV/otFp8aMrhwGxIEYv1wOmot9OrBRVgLVSNTU9EtJVzISEowbhe+7ZP1jUaAaW
</span><span class="z-text z-plain">WrjvDA==
</span><span class="z-text z-plain">=cfGG
</span><span class="z-text z-plain">-----END PGP MESSAGE-----
</span></code></pre><p>In this message there’s a nice Easter Egg for you, my friend. The password is the name of the waterfall depicted in this post, all together and in PascalCase.<p>Upon checking in, the timer will be reset to the Warning Timer, even if you are already in the Dead Man’s Timer.<p>If both timers run out, the messages will be sent and DMS will exit.<h2 id=the-implementation-details>The Implementation Details</h2><div class="admonition info"><div class="admonition-icon admonition-icon-info"></div><div class=admonition-content><strong class=admonition-title>INFO</strong><p>For the stupid smelly nerds that want to go beyond the <a href=https://github.com/sherlock-project/sherlock/issues/2019>“JUST MAKE A FUCKING .EXE AND GIVE IT TO ME”</a>.</div></div><p>Before we dive into the code, here are the <strong>dependencies</strong> that I am using. I’ve tried to keep them to a minimum, since I want this to be a dead-simple program. This also helps with reducing the incidence of bugs and narrowing the attack surface:<ul><li><a href=https://ratatui.rs><code>ratatui</code></a> for the Terminal User Interface (TUI)<li><a href=https://serde.rs><code>serde</code></a>, <a href=https://crates.io/crates/toml><code>toml</code></a>, and <a href=https://crates.io/crates/directories-next><code>directories-next</code></a> for managing the TOML configuration file.<li><a href=https://lettre.rs><code>lettre</code></a> to manage email sending, and <a href=https://crates.io/crates/mime_guess><code>mime_guess</code></a> to robustly handle optional attachments.<li><a href=https://crates.io/crates/chrono><code>chrono</code></a> to handle timers and date/time formatting.</ul><blockquote><p><a href="https://storopoli.com/blog/dead-man-switch/$block.attrs('info')"></a> The Dead Man’s Switch Web Interface uses <a href=https://github.com/tokio-rs/axum><code>axum</code></a>, <a href=https://djc.github.io/askama/><code>askama</code></a> and <a href=https://github.com/tower-rs/tower><code>tower</code></a>.</blockquote><p>The app is divided into a library and a binary. The library is contained in the <code>lib.rs</code> file and the binary in the <code>main.rs</code>, both under the <code>src/</code> directory. Here’s a representation of the structure of <code>src/</code>:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">src/</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> config.rs</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> email.rs</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> lib.rs</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> main.rs</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> timer.rs</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">└──</span></span><span class="z-meta z-function-call z-arguments z-shell"> tui.rs</span>
</span></code></pre><p>As we can see, it is divided into 4 modules:<ul><li><strong><code>config.rs</code></strong>: Handles the configuration file.<li><strong><code>email.rs</code></strong>: Handles the email sending.<li><strong><code>timer.rs</code></strong>: Handles the timers and timer logic.<li><strong><code>tui.rs</code></strong>: Handles the Terminal User Interface (TUI).</ul><p>Feel free to dive in any of these files to understand the implementation details. I’ve made sure that the code is <em>both</em> <strong>well-tested</strong> and <strong>well-documented</strong>.<h2 id=contributions-are-welcome>Contributions are Welcome</h2><p>If you want to contribute to the project, feel free to open a pull request. I’ve marked a few issues as <code>good first issue</code> to help you get started. Check out the <a href=https://github.com/storopoli/dead-man-switch>GitHub repository</a>.<h2 id=conclusion>Conclusion</h2><p>I’ve built a simple no-bullshit Dead Man’s Switch so that any person can use it. Feel free to use it and share it with your friends. Let’s hope that we don’t go to a dystopian future where everyone needs to use it. Although, I am pretty sure that Sherlock Holmes would have used it no matter what. Probably the way he would have used it is by:<ol><li>Set-up a non-KYC email account that supports SMTP.<li>Sign-up for a non-KYC VPS with Bitcoin or Monero.<li>Access the VPS via Tor using Tails.<li>Change the server’s default SSH port to a random one.<li>Disallow password authentication and only allow key-based authentication.<li>Encrypt everything in the case the server is seized.</ol><div class="admonition tip"><div class="admonition-icon admonition-icon-tip"></div><div class=admonition-content><strong class=admonition-title>TIP</strong><p>Sherlock could also use a coreboot non-KYC piece of hardware that runs StartOS and the newly launched Dead Man’s Switch StartOS app that already uses an onion service for handling the check-ins via Tor.</div></div></section></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=overlay for=toc-toggle></label><label title="Toggle Table of Contents" class=button for=toc-toggle id=toc-button><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://storopoli.com/blog/dead-man-switch/#dead-man-s-switch>Dead Man’s Switch</a><li><a href=https://storopoli.com/blog/dead-man-switch/#how-to-use-it>How to Use It</a><li><a href=https://storopoli.com/blog/dead-man-switch/#the-implementation-details>The Implementation Details</a><li><a href=https://storopoli.com/blog/dead-man-switch/#contributions-are-welcome>Contributions are Welcome</a><li><a href=https://storopoli.com/blog/dead-man-switch/#conclusion>Conclusion</a></ul></div></div></div><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://storopoli.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://storopoli.com/atom.xml> <img alt=feed loading=lazy src=https://storopoli.com/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=mailto:jose@storopoli.com> <img alt=email loading=lazy src=https://storopoli.com/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://storopoli.com/publickey.txt> <img alt=pgp loading=lazy src=https://storopoli.com/social_icons/key.svg title=pgp> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/storopoli/> <img alt=github loading=lazy src=https://storopoli.com/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://matrix.to/#/@jose:storopoli.com> <img alt=matrix loading=lazy src=https://storopoli.com/social_icons/matrix.svg title=matrix> </a><li><a class="nav-links no-hover-padding social" href="https://simplex.chat/contact#/?v=2-5&smp=smp%3A%2F%2FUkMFNAXLXeAAe0beCa4w6X_zp18PwxSaSjY17BKUGXQ%3D%40smp12.simplex.im%2FUXrwU_eqdgeHQ6HYehFs0s8VRHOr3k47%23%2F%3Fv%3D1-2%26dh%3DMCowBQYDK2VuAyEApVAYxmE0bpIIiPftNjehy4qOoa14ubyEGzbRX_BlO0w%253D%26srv%3Die42b5weq7zdkghocs3mgxdjeuycheeqqmksntj57rmejagmg4eor5yd.onion" rel=" me"> <img alt=simplex loading=lazy src=https://storopoli.com/social_icons/simplex.svg title=simplex> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://orcid.org/0000-0002-0559-5176> <img alt=orcid loading=lazy src=https://storopoli.com/social_icons/orcid.svg title=orcid> </a></ul></nav><nav class=nav-navs></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> • <a href=https://github.com/storopoli/storopoli.com> Site source </a></small></div></section></footer>